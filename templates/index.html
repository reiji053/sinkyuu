<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>データ一覧</title>
	<style>
		table { border-collapse: collapse; width: 100%; max-width: 1000px; }
		th, td { border: 1px solid #ddd; padding: 8px; }
		th { background: #f4f4f4; }
		body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; padding: 20px; }
		h1 { margin-top: 32px; }
	</style>
</head>
<body>
	{% if error %}
	<p style="color: red;">DB 接続エラー: {{ error }}</p>
	{% endif %}

	<h1>問題 (quiz_questions)</h1>
	<p><a href="{{ url_for('quiz_new') }}">▶ 新しい問題を追加</a></p>
	{% if quiz_questions and quiz_questions|length > 0 %}
	<table>
		<thead>
			<tr>
				<th>ID</th>
				<th>Category ID</th>
				<th>Question</th>
				<th>Audio Path</th>
				<th>Difficulty</th>
				<th>Actions</th>
				<th>Created At</th>
			</tr>
		</thead>
		<tbody>
			{% for p in quiz_questions %}
			<tr>
				<td>{{ p.id }}</td>
				<td>{{ p.category_id }}</td>
				<td>{{ p.question_text }}</td>
				<td>{{ p.audio_path }}</td>
				<td>{{ p.difficulty }}</td>
				<td>
					<a href="{{ url_for('quiz_edit', quiz_id=p.id) }}">編集</a>
					<form method="post" action="{{ url_for('quiz_delete', quiz_id=p.id) }}" style="display:inline" onsubmit="return confirm('本当に削除しますか？');">
						<button type="submit">削除</button>
					</form>
				</td>
				<td>{{ p.created_at }}</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
	{% else %}
	<p>問題テーブルのデータがありません。</p>
	{% endif %}

	<h1>Users</h1>
	{% if users and users|length > 0 %}
	<table>
		<thead>
			<tr>
				<th>ID</th>
				<th>Username</th>
				<th>Email</th>
				<th>Created At</th>
			</tr>
		</thead>
		<tbody>
			{% for u in users %}
			<tr>
				<td>{{ u.id }}</td>
				<td>{{ u.username }}</td>
				<td>{{ u.email }}</td>
				<td>{{ u.created_at }}</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
	{% else %}
	<p>Users テーブルのデータがありません。</p>
	{% endif %}

</body>
</html>